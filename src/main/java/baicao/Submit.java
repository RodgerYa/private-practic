package baicao;

import com.xingren.jackson.ObjectMapperFactory;
import okhttp3.*;

import java.util.Arrays;

/**
 * @author yanwenbo
 * @date 2020/12/11
 */
public class Submit {

    private final OkHttpClient httpClient = new OkHttpClient();

    public static void main(String[] args) {
        new Submit().doPost();
    }
    private void doPost() {
        String json = "{\"pspMain\":{\"pid\":\"203451651098764766\",\"cfh\":\"203451651098764766\",\"shdh\":\"203451651098764766\",\"mznx\":\"MZ\",\"zd\":\"虚病，气血两虚\",\"yybh\":\"9073\",\"kfrq\":\"2020-12-10 16:54:08\",\"xm\":\"陈春燕\",\"xb\":\"女\",\"nl\":\"40\",\"lxdh\":\"18019241067\",\"psdz\":\"上海市浦东新区航头镇鹤东村沿江815号\",\"psfs\":\"DS\",\"yzsm\":\"共1剂，服用31天，每天2次，空腹服，调服\",\"mtfs\":1,\"ts\":1,\"ysxm\":\"周芬敏\",\"bz\":\"忌辛辣、忌油腻、忌生冷、忌烟酒\",\"mxsl\":53,\"yfnx\":\"N\",\"cfnx\":\"GF\"},\"pspDetail\":[{\"pid\":\"203451651098764766\",\"xh\":1143650,\"ypmc\":\"人参片（生晒参）\",\"ypbm\":\"20950\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143651,\"ypmc\":\"黄芪\",\"ypbm\":\"575\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143652,\"ypmc\":\"明党参\",\"ypbm\":\"803\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143653,\"ypmc\":\"当归\",\"ypbm\":\"320\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143654,\"ypmc\":\"川芎\",\"ypbm\":\"268\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143655,\"ypmc\":\"白芍\",\"ypbm\":\"4468\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143656,\"ypmc\":\"熟地黄\",\"ypbm\":\"1009\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143657,\"ypmc\":\"制黄精\",\"ypbm\":\"1268\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143658,\"ypmc\":\"麸炒白术\",\"ypbm\":\"411\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143659,\"ypmc\":\"麸炒山药\",\"ypbm\":\"416\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143660,\"ypmc\":\"茯苓\",\"ypbm\":\"425\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143661,\"ypmc\":\"醋香附\",\"ypbm\":\"294\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143662,\"ypmc\":\"鸡血藤\",\"ypbm\":\"589\",\"ypgg\":\"g\",\"sl\":\"300\"},{\"pid\":\"203451651098764766\",\"xh\":1143663,\"ypmc\":\"酒女贞子\",\"ypbm\":\"649\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143664,\"ypmc\":\"墨旱莲\",\"ypbm\":\"805\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143665,\"ypmc\":\"桑椹\",\"ypbm\":\"919\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143666,\"ypmc\":\"菟丝子\",\"ypbm\":\"1076\",\"ypgg\":\"g\",\"sl\":\"300\"},{\"pid\":\"203451651098764766\",\"xh\":1143667,\"ypmc\":\"枸杞子\",\"ypbm\":\"465\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143668,\"ypmc\":\"覆盆子\",\"ypbm\":\"435\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143669,\"ypmc\":\"炒车前子\",\"ypbm\":\"116\",\"ypgg\":\"g\",\"sl\":\"90\"},{\"pid\":\"203451651098764766\",\"xh\":1143670,\"ypmc\":\"补骨脂\",\"ypbm\":\"79\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143671,\"ypmc\":\"炒白扁豆\",\"ypbm\":\"99\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143672,\"ypmc\":\"淫羊藿\",\"ypbm\":\"1208\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143673,\"ypmc\":\"巴戟肉\",\"ypbm\":\"12\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143674,\"ypmc\":\"乌药\",\"ypbm\":\"1091\",\"ypgg\":\"g\",\"sl\":\"60\"},{\"pid\":\"203451651098764766\",\"xh\":1143675,\"ypmc\":\"北柴胡\",\"ypbm\":\"60\",\"ypgg\":\"g\",\"sl\":\"50\"},{\"pid\":\"203451651098764766\",\"xh\":1143676,\"ypmc\":\"升麻\",\"ypbm\":\"954\",\"ypgg\":\"g\",\"sl\":\"50\"},{\"pid\":\"203451651098764766\",\"xh\":1143677,\"ypmc\":\"羌活\",\"ypbm\":\"865\",\"ypgg\":\"g\",\"sl\":\"90\"},{\"pid\":\"203451651098764766\",\"xh\":1143678,\"ypmc\":\"独活\",\"ypbm\":\"355\",\"ypgg\":\"g\",\"sl\":\"90\"},{\"pid\":\"203451651098764766\",\"xh\":1143679,\"ypmc\":\"肉桂\",\"ypbm\":\"899\",\"ypgg\":\"g\",\"sl\":\"30\",\"yf\":\"后下\"},{\"pid\":\"203451651098764766\",\"xh\":1143680,\"ypmc\":\"泽泻\",\"ypbm\":\"1235\",\"ypgg\":\"g\",\"sl\":\"90\"},{\"pid\":\"203451651098764766\",\"xh\":1143681,\"ypmc\":\"酒萸肉\",\"ypbm\":\"652\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143682,\"ypmc\":\"牡丹皮\",\"ypbm\":\"806\",\"ypgg\":\"g\",\"sl\":\"90\"},{\"pid\":\"203451651098764766\",\"xh\":1143683,\"ypmc\":\"红花\",\"ypbm\":\"525\",\"ypgg\":\"g\",\"sl\":\"50\"},{\"pid\":\"203451651098764766\",\"xh\":1143684,\"ypmc\":\"玫瑰花\",\"ypbm\":\"775\",\"ypgg\":\"g\",\"sl\":\"90\"},{\"pid\":\"203451651098764766\",\"xh\":1143685,\"ypmc\":\"郁金\",\"ypbm\":\"1217\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":1143686,\"ypmc\":\"鹿角片\",\"ypbm\":\"736\",\"ypgg\":\"g\",\"sl\":\"100\",\"yf\":\"先煎\"},{\"pid\":\"203451651098764766\",\"xh\":1143687,\"ypmc\":\"砂仁\",\"ypbm\":\"926\",\"ypgg\":\"g\",\"sl\":\"50\",\"yf\":\"后下\"},{\"pid\":\"203451651098764766\",\"xh\":1143688,\"ypmc\":\"焦六神曲\",\"ypbm\":\"606\",\"ypgg\":\"g\",\"sl\":\"300\"},{\"pid\":\"203451651098764766\",\"xh\":1143689,\"ypmc\":\"炒鸡内金\",\"ypbm\":\"163\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143690,\"ypmc\":\"炒稻芽\",\"ypbm\":\"127\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143691,\"ypmc\":\"炒麦芽\",\"ypbm\":\"187\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143692,\"ypmc\":\"炙甘草\",\"ypbm\":\"1279\",\"ypgg\":\"g\",\"sl\":\"50\"},{\"pid\":\"203451651098764766\",\"xh\":1143693,\"ypmc\":\"大枣\",\"ypbm\":\"312\",\"ypgg\":\"g\",\"sl\":\"90\"},{\"pid\":\"203451651098764766\",\"xh\":1143694,\"ypmc\":\"大血藤\",\"ypbm\":\"310\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":1143695,\"ypmc\":\"败酱草\",\"ypbm\":\"47\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":3689,\"ypmc\":\"阿胶（山东东阿）\",\"ypbm\":\"100002\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":3690,\"ypmc\":\"鹿角胶（湖北康源）\",\"ypbm\":\"100004\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":3691,\"ypmc\":\"黑芝麻\",\"ypbm\":\"100014\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":3692,\"ypmc\":\"核桃仁\",\"ypbm\":\"100015\",\"ypgg\":\"g\",\"sl\":\"100\"},{\"pid\":\"203451651098764766\",\"xh\":3693,\"ypmc\":\"龙眼肉\",\"ypbm\":\"100016\",\"ypgg\":\"g\",\"sl\":\"50\"},{\"pid\":\"203451651098764766\",\"xh\":3694,\"ypmc\":\"黄酒\",\"ypbm\":\"100034\",\"ypgg\":\"g\",\"sl\":\"150\"},{\"pid\":\"203451651098764766\",\"xh\":3695,\"ypmc\":\"红糖\",\"ypbm\":\"100011\",\"ypgg\":\"g\",\"sl\":\"150\"}]}";

        RequestBody body = RequestBody.create(
            json,
            MediaType.parse("application/json; charset=utf-8"));

        Request request = new Request.Builder()
            .url("http://zlbc.zjbaicao.com:360/api/v4/index.html/?appid=8413076179&appsecret=xHWAnXpvfeNrVUJhakYLZcDJlNDmXvEy")
            .addHeader("User-Agent", "okhttp/3.3.0")
            .post(body)
            .build();

        try {
            Response response = httpClient.newCall(request).execute();
            if (response.isSuccessful()) {
                String resp = response.body().byteString().utf8();
                ObjectMapperFactory.getObjectMapper().readValue(resp, BaiCaoResponse.class);
            }
        } catch(Exception e) {
            System.out.printf(e.getMessage());
        }
    }
}
